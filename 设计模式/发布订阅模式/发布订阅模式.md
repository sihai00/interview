# 发布订阅模式
一个被称作被观察者的对象，维护一组被称为观察者的对象，这些对象依赖于被观察者，被观察者自动将自身的状态的任何变化通知给它们。

优势：
- 复用
- 解耦

缺点：
- 订阅者之间互不知晓
- 发布者和订阅者互不知晓

```javascript
var pubsub = {};

(function(q) {

  var topics = {},
    subUid = -1;

  q.publish = function( topic, args ) {

    if ( !topics[topic] ) {
      return false;
    }

    var subscribers = topics[topic],
      len = subscribers ? subscribers.length : 0;

    while (len--) {
      subscribers[len].func( topic, args );
    }

    return this;
  };

  q.subscribe = function( topic, func ) {

    if (!topics[topic]) {
      topics[topic] = [];
    }

    var token = ( ++subUid ).toString();
    topics[topic].push({
      token: token,
      func: func
    });
    return token;
  };

  q.unsubscribe = function( token ) {
    for ( var m in topics ) {
      if ( topics[m] ) {
        for ( var i = 0, j = topics[m].length; i < j; i++ ) {
          if ( topics[m][i].token === token) {
            topics[m].splice( i, 1 );
            return token;
          }
        }
      }
    }
    return this;
  };
}( pubsub ));

var messageLogger = function ( topics, data ) {
  console.log( "Logging: " + topics + ": " + data );
};

var subscription = pubsub.subscribe( "inbox/newMessage", messageLogger );

pubsub.publish( "inbox/newMessage", "hello world!" );

pubsub.unsubscribe( subscription );

pubsub.publish( "inbox/newMessage", "Hello! are you still there?" );
```
