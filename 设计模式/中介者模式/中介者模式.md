# 中介者模式
中介者是一个行为设计模式，使我们可以导出统一的接口，这样系统不同部分就可以彼此通信

优点：
- 松耦合性

缺点：
- 引入一个单点故障

观察者模式区别：
- 中间人模式：默认使用让对象严格通过中间人进行通信的方式实现松耦合
- 观察者模式：创建了观察者对象，这些观察者对象会发布触发对象认购的感兴趣的事件

```javascript
var mediator = (function(){
  var topics = {};
  var subscribe = function( topic, fn ){
    if ( !topics[topic] ){
      topics[topic] = [];
    }
    topics[topic].push( { context: this, callback: fn } );
    return this;
  };
  var publish = function( topic ){
    var args;
    if ( !topics[topic] ){
      return false;
    }
    args = Array.prototype.slice.call( arguments, 1 );
    for ( var i = 0, l = topics[topic].length; i < l; i++ ) {
      var subscription = topics[topic][i];
      subscription.callback.apply( subscription.context, args );
    }
    return this;
  };
  return {
    publish: publish,
    subscribe: subscribe,
    installTo: function( obj ){
      obj.subscribe = subscribe;
      obj.publish = publish;
    }
  };
}())

function displayChat( data ) {
  console.log(data)
}

function logChat( data ) {
  console.log(data)
}
mediator.subscribe( "newMessage", displayChat );
mediator.subscribe( "newMessage", logChat );

mediator.publish( "newMessage" , 1111 )
```
